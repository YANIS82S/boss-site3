<!doctype html>
<html lang="el">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Boss Check-In</title>
<style>
  :root { --bg:#0b1220; --fg:#e2e8f0; --muted:#94a3b8; --ok:#22c55e; }
  *{box-sizing:border-box}
  body{margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;
       background:radial-gradient(1000px 600px at 60% -10%, #14233e 0%, #0b1220 40%, #0a0f1a 100%);
       color:var(--fg);font-family:Inter,system-ui,Arial}
  .card{max-width:620px;width:92%;padding:26px 22px;border:1px solid rgba(255,255,255,.08);
        background:rgba(255,255,255,.05);backdrop-filter:blur(4px);border-radius:16px;text-align:center}
  h1{margin:4px 0 6px;font-size:26px}
  p{margin:0;color:var(--muted)}
  .ok{display:inline-flex;align-items:center;gap:10px;margin:14px 0 6px;padding:10px 14px;border-radius:12px;
      background:rgba(34,197,94,.12);border:1px solid rgba(34,197,94,.3);color:var(--ok);font-weight:800}
  .meta{font-size:13px;color:#8aa0b3;margin-top:8px}
  button{all:unset;display:inline-block;margin-top:14px;padding:10px 14px;border-radius:10px;
         border:1px dashed rgba(255,255,255,.25);color:#cbd5e1;cursor:pointer}
</style>
</head>
<body>
  <div class="card" role="status" aria-live="polite">
    <div class="ok">✅ Παρουσία καταχωρήθηκε</div>
    <h1>Boss Checked-In</h1>
    <p id="code">Κωδικός καταγραφής: <b>RG-BOSS-0001</b></p>
    <div class="meta">Ώρα: <span id="ts">--:--</span> • Συσκευή: <span id="ua">-</span></div>
    <button id="applause">👏 Μικρό χειροκρότημα</button>
  </div>

  <!-- Local MP3 (iPhone-safe when user taps) -->
  <audio id="applauseAudio" preload="auto" playsinline>
    <source src="sounds/clap.mp3" type="audio/mpeg">
  </audio>

<script>
  // timestamp (τοπική ώρα)
  const ts = new Date();
  document.getElementById('ts').textContent =
    ts.toLocaleString(undefined, { hour: '2-digit', minute: '2-digit' });

  // user agent hint
  const ua = navigator.userAgent.includes('iPhone') ? 'iPhone'
         : navigator.userAgent.includes('Android') ? 'Android'
         : 'Browser';
  document.getElementById('ua').textContent = ua;

  // μικρό vibration on load (όπου υποστηρίζεται)
  if (navigator.vibrate) { navigator.vibrate(60); }

  // Tap-to-play (σίγουρο για iPhone)
  const btn = document.getElementById('applause');
  const audio = document.getElementById('applauseAudio');
  btn.addEventListener('click', async () => {
    try {
      audio.currentTime = 0;
      await audio.play();
    } catch (e) {
      if (navigator.vibrate) navigator.vibrate(60);
    }
  });

  // Προαιρετικό prewarm: muted play ώστε στο 1ο tap να ξεκινήσει ακαριαία (iOS θα απαιτήσει πάλι tap)
  (function prewarm(){
    try { audio.muted = true; audio.play().catch(()=>{}); } catch(_){}
    const unlock = async () => {
      try { audio.muted = false; audio.currentTime = 0; await audio.play(); } catch(_){}
      window.removeEventListener('touchstart', unlock, {passive:true});
      window.removeEventListener('click', unlock);
    };
    window.addEventListener('touchstart', unlock, {passive:true, once:true});
    window.addEventListener('click', unlock, {once:true});
  })();
</script>
</body>
</html>
